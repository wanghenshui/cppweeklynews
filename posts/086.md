---
layout: post
title:  第86期
---
# C++ 中文周刊 第86期


从[reddit](https://www.reddit.com/r/cpp/)/[hackernews](https://news.ycombinator.com/)/[lobsters](https://lobste.rs/)/[meetingcpp](https://www.meetingcpp.com/blog/blogroll/items/Meeting-Cpp-weekly-Blogroll-352.html)/[purecpp](http://www.purecpp.cn/)/知乎/等等摘抄一些c++动态


[周刊项目地址](https://github.com/wanghenshui/cppweeklynews)｜[在线地址](https://wanghenshui.github.io/cppweeklynews/) ｜[知乎专栏](https://www.zhihu.com/column/jieyaren) |[腾讯云+社区](https://cloud.tencent.com/developer/column/92884)


公众号也有了

<img src="https://wanghenshui.github.io/cppweeklynews/assets/code.png" alt=""  width="30%">

弄了个qq频道，[手机qq点击进入](https://qun.qq.com/qqweb/qunpro/share?_wv=3&_wwv=128&inviteCode=xzjHQ&from=246610&biz=ka)

欢迎投稿，推荐或自荐文章/软件/资源等


可以贴在下一期草稿里 [草稿链接](https://github.com/wanghenshui/cppweeklynews/pull/18)

2022 10 29

---

## 资讯

标准委员会动态/ide/编译器信息放在这里

[编译器信息最新动态推荐关注hellogcc公众号 2022-10-26 第173期](https://github.com/hellogcc/osdt-weekly/blob/master/weekly-2022/2022-10-26.md)

2022 purecpp大会ppt和视频 

http://www.purecpp.cn/detail?id=2322
## 文章

- [Improving Copy and Move Elision](https://devblogs.microsoft.com/cppblog/improving-copy-and-move-elision/)

介绍MSVC在copy elision move elision 的改进

- [Did you now that functions in are constexpr since C++23?](https://github.com/QuantlabFinancial/cpp_tip_of_the_week/blob/master/tips/301.md)

```cpp
consteval auto to_number(auto str) {
    int value;{} 
    std::from_chars(std::cbegin(str), std::cend(str), value);
    return value;
}
static_assert(42 == to_number(std::string_view{"42"}));
```

- [C/C++ Debugging Tools](https://www.kdab.com/c-cpp-debugging-tools/)

调试工具。老生常谈了

- [Stranger Strings: An exploitable flaw in SQLite](https://blog.trailofbits.com/2022/10/25/sqlite-vulnerability-july-2022-library-api/)

简单说，这个就是sqlite里的printf遇到%Q %q %w且字符串 非常非常非常大，才会触发这个CVE。且sqlite本身不会触发

sqlite不是100%分支覆盖么，为啥还有问题？分支覆盖了并不代表没问题。fuzzer也有可能覆盖不到这种非常非常大的数据的场景

另外牛逼一点的静态分析工具也能查到，但是基本上就是个告警，但没人用/当回事

使用字符串 format %一定要注意。这种坑不是一两个了。苹果wifi那个CVE也是%惹的祸

- [The evolution of statements with initializers in C++](https://www.sandordargo.com/blog/2022/10/26/statements-with-initializers-part-1-conditionals)

if-switch里可以定义了。这样省一行。比如

```cpp
switch (Foo foo; foo.getValue()) {
    case 1: //...
            break;
    case 2: //...
            break;
    case 3: //...
            break;
    default:
            //...
            break;
}
...
if (int val = getValue(); val<10) {
    std::cout << "val smaller than 10: " << val << '\n';
} else if (val < 5) {
    std::cout << "val smaller than 5: " << val << '\n';
} else {
    std::cout << "val is bigger than 10: " << val << '\n';
} 

```

c++17就可以了。

- [What happens if my C++ exception handler itself raises an exception?](https://devblogs.microsoft.com/oldnewthing/20221021-00/?p=107307)

```cpp
try
{
    Block1;
}
catch (Type1 ex1)
{
    Block2;
}
catch (Type2 const& ex2)
{
    Block3;
}
```

作者说了一个场景

Block1里有两个栈对象，第一个析构的时候抛异常，被catch了。第二个也跑异常，此时已经catch过了，所以直接std::terminate

c++是没有finally收尾+析构这种模式的，上面这种场景要 如何规避？

## 视频

- [C++ Weekly - Ep 347 - This PlayStation Jailbreak NEVER SHOULD HAVE HAPPENED](https://www.youtube.com/watch?v=rWCvk4KZuV4)

整数溢出导致。。。`-Wno-error=deprecated` `-Wsign-conversion` `-Wconversion` 你总得用一个吧


## 开源项目需要人手

- [asteria](https://github.com/lhmouse/asteria) 一个脚本语言，可嵌入，长期找人，希望胖友们帮帮忙，也可以加群384042845和作者对线
- [pika](https://github.com/OpenAtomFoundation/pika) 一个nosql 存储， redis over rocksdb，非常需要人贡献代码胖友们， 感兴趣的欢迎加群294254078前来对线

## 新项目介绍/版本更新

- [tiny-optional](https://github.com/Sedeniono/tiny-optional) 一个optional库
- [libcfg-cpp](https://github.com/mystere1337/libcfg-cpp) 一个配置库
- [sclui](https://github.com/0x3alex/sclui)  一个 终端库
- [cheap (C++ HTML Element Apparator) ](https://github.com/s9w/cheap) 
  生成html的，比如
  ```cpp
  const std::string elem_str = get_element_str(div(span("first"), img("src=test.jpg"_att)));
  ```
  生成
  ```html
  <div>
    <span>first</span>
    <img src="test.jpg" />
  </div>
  ```

## 工作招聘

不被开除就不错了

---

看到这里或许你有建议或者疑问或者指出错误，请留言评论! 多谢!  你的评论非常重要！也可以帮忙点赞收藏转发！多谢支持！

[本文永久链接](https://wanghenshui.github.io/cppweeklynews/posts/086.html)
