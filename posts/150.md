---
layout: post
title:  第150期
---
# C++ 中文周刊 2024-02-24 第150期

[周刊项目地址](https://github.com/wanghenshui/cppweeklynews)

公众号

<img src="https://wanghenshui.github.io/cppweeklynews/assets/code.png" alt=""  width="30%">

qq群 [点击进入](https://qm.qq.com/q/6NGizNPyG4)

RSS https://github.com/wanghenshui/cppweeklynews/releases.atom

欢迎投稿，推荐或自荐文章/软件/资源等

请[提交 issue](https://github.com/wanghenshui/cppweeklynews/issues)   或评论区留言

本期文章由 黄亮Anthony Amnesia 赞助

---

## 资讯

标准委员会动态/ide/编译器信息放在这里

[编译器信息最新动态推荐关注hellogcc公众号 本周更新 2024-02-21 第242期 ](https://github.com/hellogcc/osdt-weekly/blob/master/weekly-2023/2023-01-04.md)

本台记者 kenshin报道，visual studio最近更新了非常有用的功能，分析编译时间之类，分析字段内存布局，分析include等等

感兴趣 可以更新一下 What’s New for C++ Developers in Visual Studio 2022 17.9 https://devblogs.microsoft.com/cppblog/whats-new-for-cpp-developers-in-visual-studio-2022-17-9/?WT.mc_id=academic-0000-abartolo

另外clang gcc有单独的工具，比如ftime-trace，比如 这个 https://github.com/aras-p/ClangBuildAnalyzer

xmake 2.8.7发布

https://github.com/xmake-io/xmake/wiki/Xmake-v2.8.7-released,-Add-cosmocc-toolchain-support,-build%E2%80%90once-run%E2%80%90anywhere

boost新parser正在review中 https://lists.boost.org/Archives/boost/2024/02/255957.php

类似boost spirit，代码在这里 https://github.com/tzlaine/parser

think-cell出了个意见，他们在自己的库里维护了boost spirit，觉得重新造轮子不太合理

## 文章


#### Rage Against The Glue: Beyond Run-Time Media Frameworks with Modern C++ https://cnrs.hal.science/hal-04090584/document


音视频领域有个 M x N问题

不同的media processors 在N种平台上导致api复杂度上升不可维护

考虑一种接口设计方法，让代码更简练

琢磨半天结果是concept + boost pfr之类的检测接口/策略模版

代码在这里 https://github.com/celtera/avendish

还有一些其他的想法 在这里 https://ossia.io/posts/reflection/

#### constexpr and consteval functions https://biowpn.github.io/bioweapon/2024/02/17/constexpr-consteval-function.html

记住这段代码就行了

```cpp
// This is a pure compile-time function.
// Any evaluation is fully done at compile-time;
// no runtime code will be generated by the compiler, just like `static_assert`.
consteval size_t strlen_ct(const char* s) {
    size_t n = 0;
    for (; s[n] != '\0'; ++n);
    return n;
}

// This is a pure runtime function, which can only be invoked at runtime.
size_t strlen(const char* s);

// This function can be invoked both at both compile-time and at runtime,
// depending on the context.
constexpr size_t strlen_dual(const char* s) {
    if consteval {
        return strlen_ct(s); // compile-time path
    } else {
        return strlen(s);    // runtime path
    }
}

```
constexpr最好两种分支都实现，避免意外的问题


#### How to debug C and C++ programs with rr https://developers.redhat.com/blog/2021/05/03/instant-replay-debugging-c-and-c-programs-with-rr#

其实rr和gdb record差不多，感觉可以用这个文档例子做个视频，这里标记一个TODO

https://github.com/rr-debugger/rr?tab=readme-ov-file

#### Undefined behavior in C and C++ https://lumagraph.ie/undefined-behavior

讲UB产生的场景，以及如何避免，给的方案编译flag ubsan以及换个语言，我谢谢你

#### Measuring energy usage: regular code vs. SIMD code https://lemire.me/blog/2024/02/19/measuring-energy-usage-regular-code-vs-simd-code/

lemire新活，只要你的代码足够快，即使是simd这种费电的指令相比而言整体费电也不多

代码在这里 https://github.com/lemire/Code-used-on-Daniel-Lemire-s-blog/tree/master/2024/02/19

值得复现一下


## 视频




## 开源项目介绍

- [asteria](https://github.com/lhmouse/asteria) 一个脚本语言，可嵌入，长期找人，希望胖友们帮帮忙，也可以加群753302367和作者对线
- [Unilang](https://github.com/linuxdeepin/unilang) deepin的一个通用编程语言，点子有点意思，也缺人，感兴趣的可以github讨论区或者deepin论坛看一看。这里也挂着长期推荐了
- 一个unique ptr SSO优化实现 https://github.com/KRM7/small_unique_ptr 代码很短，600行，感觉可以讲一讲，这里标记一个TODO
- https://github.com/google/gemma.cpp 这是啥啊最近挺火的
- https://github.com/pizlonator/llvm-project-deluge 这个哥们fork llvm整了个safe c。看一乐

## 热门库最近更新了什么

要列上改动的commit链接

seastar

folly

fmt

brpc？

async_simple

## 工作招聘

## 互动环节

---

[上一期](https://wanghenshui.github.io/cppweeklynews/posts/149.html)